<!--
<ol>
    <li *ngFor="let product of products">{{ product }}</li>
</ol>
-->
<div class="row">
    <div class="col-10">
        <!-- 
            Event interface is generated by the browser for every single event 
            (keyup, keydown, mouseclick, mousemove) that occurs in the browser
            populate the data related to the event and broadcast it
            Angular captures this event interface in a special variable $event
            and make it available for us
            Event interface has a property called target. Target will give you
            the form element object where the event occurs.
        -->
        <input type="text" name="keyword" id="keyword" class="form-control" (keyup)="doSearch($event)" />
        <ol>
            <li *ngFor="let product of searchResults">{{ product.name }}</li>
        </ol>
    </div>
    <div class="col-1">
        <button type="button" class="btn btn-primary position-relative">
            Cart
            <span class="position-absolute top-0 start-100 translate-middle 
                badge rounded-pill bg-danger">{{ shoppingCart.length }}</span>
        </button>
    </div>
    <div class="col-1" style="padding-bottom: 15px;">
        <button class="btn btn-success" style="float: right" (click)="changeView()">Gallery</button>
    </div>
</div>
<div class="row" *ngIf="isGallery">
    <div class="col-4" *ngFor="let product of products" style="padding-bottom: 15px;">
        <div class="card">
            <img [src]="product.photo" class="card-img-top" [alt]="product.photo" />
            <div class="card-body">
                <h5 class="card-title">{{ product.name }}</h5>
                <p class="card-text">{{ product.description }}</p>
                <!--
                <h6 class="lessQuantity">Quantity: {{ product.quantity }}</h6>
                <h6 [class]="lessQuantity">Quantity: {{ product.quantity }}</h6>
                <h6 [class]="'lessQuantity'">Quantity: {{ product.quantity }}</h6>
                -->
                <h6 [class.lessQuantity]="product.quantity < reorderQuantity">
                    Quantity: {{ product.quantity }}</h6>
                <h6 [style.color]="(product.price < 1000) ? 'green' : (product.price < 2000) ? 'blue' : 'red'">
                    Price: {{ product.price }}</h6>
                <!-- 
                    We have created a variable #requiredQuantity in the DOM
                    This variable is pointing to the entire TextBox
                    VDOM don't know anything about this particular variable
                    unless you pass this variable to method in VDOM
                -->
                <input type="text" name="requiredQuantity" id="requiredQuantity" #requiredQuantity maxlength="3"
                    size="3" (keyup)="validate(product, requiredQuantity, addButton)"/>&nbsp;
                <button id="addButton" #addButton class="btn btn-primary" [disabled]="product.quantity < reorderQuantity"
                    (click)="addToCart(product, requiredQuantity)">Add</button>
            </div>
        </div>
    </div>
</div>
<div class="row" *ngIf="!isGallery">
    <div class="col-12">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>No.</th>
                    <!-- attribute binding -->
                    <th [attr.colspan]="colspan">Product</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let product of products; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>
                        <img [src]="product.photo" class="img-thumbnail" [alt]="product.photo" width="150" />
                    </td>
                    <td>
                        <h5 class="card-title">{{ product.name }}</h5>
                        <p class="card-text">{{ product.description }}</p>
                    </td>
                    <td>
                        <!--
                        <h6 class="lessQuantity">Quantity: {{ product.quantity }}</h6>
                        <h6 [class]="lessQuantity">Quantity: {{ product.quantity }}</h6>
                        <h6 [class]="'lessQuantity'">Quantity: {{ product.quantity }}</h6>
                        -->
                        <h6 [class.lessQuantity]="product.quantity < reorderQuantity">
                            Quantity: {{ product.quantity }}</h6>
                    </td>
                    <td>
                        <h6 [style.color]="(product.price < 1000) ? 'green' : (product.price < 2000) ? 'blue' : 'red'">
                            Price: {{ product.price }}</h6>
                    </td>
                    <td>
                        <input type="text" name="requiredQuantity" id="requiredQuantity" maxlength="3" size="3" />&nbsp;
                        <button class="btn btn-primary" [disabled]="product.quantity < reorderQuantity">Add</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>